{% extends 'base.html' %}

{% block title %}Create New | GSP{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='styles/new.css') }}">
{% endblock %}

{% block body %}
<div class="form-box">
    <h2>Create New</h2>
    {% if msg: %}<div class="form-msg">{{ msg }}</div>{% endif %}
    <form action="{{ url_for('new') }}" method="post">
        <div class="input-box">
            <label for="title">Title</label>
            <input required type="text" name="title">
        </div>
        <div class="input-box">
            <label for="description">Brief Description</label>
            <input required type="text" name="description">
        </div>
        <div class="input-box">
            <label for="readme">Extended Description (Supports Markdown)</label>
            <textarea rows="6" name="readme"></textarea>
        </div>
        <div class="radio-box">
            <input required type="radio" id="service" name="type" value="Service" onclick="toggleOptionBox()">
            <label for="service">Service</label>
            <br>
            <input required type="radio" id="department" name="type" value="Department" onclick="toggleOptionBox()">
            <label for="department">Department</label>
        </div>        
        <div class="option-box" id="option-box">
            <label for="associated">Associated with a Department</label>
            <br>
            <select id="associated" name="associated">
                <option value="none">None</option>
                {% for department in departments %}
                    <option value="{{ department.id }}">{{ department.title }}</option>
                {% endfor %}
            </select>
        </div>
        <input class="submit-btn" type="submit" value="Create">
    </form>
</div>
<script>
    function toggleOptionBox() {
        var departmentRadio = document.getElementById("department");
        var optionBox = document.getElementById("option-box");

        if (departmentRadio.checked) optionBox.style.display = "block";
        else optionBox.style.display = "none";
    }
</script>
{% endblock %}